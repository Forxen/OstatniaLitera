<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SŁOWOTOK // 26</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <!-- Nowoczesne fonty: Inter (UI) i JetBrains Mono (Dane) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- TŁO AMBIENT -->
    <div class="ambient-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div class="app-wrapper">
        <!-- HEADER -->
        <header class="top-bar">
            <div class="brand">SŁOWO<span class="highlight">TOK</span>_26</div>
            <div class="status-indicator online">ONLINE</div>
        </header>

        <main class="glass-panel">
            
            <!-- EKRAN LOGOWANIA -->
            <section id="screen-login" class="screen active fade-in">
                <div class="hero-text">
                    <h1>Witaj w przyszłości<br>słownych potyczek.</h1>
                    <p>P2P / Encrypted / Real-time</p>
                </div>
                
                <div class="input-modern-group">
                    <label>IDENTYFIKATOR (NICK)</label>
                    <input type="text" id="my-nick" placeholder="Twoja nazwa..." maxlength="12" autocomplete="off">
                </div>

                <div class="actions-grid">
                    <button onclick="createGame()" class="btn-main">
                        <span>STWÓRZ LOBBY</span>
                        <div class="btn-arrow">→</div>
                    </button>
                    <button onclick="showJoinInput()" class="btn-ghost">DOŁĄCZ DO GRY</button>
                </div>

                <div id="join-area" class="input-modern-group hidden slide-up">
                    <label>KOD DOSTĘPU</label>
                    <div class="join-row">
                        <input type="text" id="join-id" placeholder="Wklej kod hosta...">
                        <button onclick="joinGame()" class="btn-icon">↵</button>
                    </div>
                </div>
            </section>

            <!-- EKRAN LOBBY -->
            <section id="screen-lobby" class="screen fade-in">
                <div class="lobby-header">
                    <h2>PANEL LOBBY</h2>
                    <div class="copy-box" onclick="copyId()">
                        <span class="label">KOD SESJI</span>
                        <span class="code-val" id="display-id">ŁADOWANIE...</span>
                        <span class="icon">❐</span>
                    </div>
                </div>
                
                <div class="grid-layout">
                    <div class="card players-card">
                        <div class="card-header">
                            <span>POŁĄCZENI</span>
                            <span class="dot-pulse"></span>
                        </div>
                        <ul id="lobby-players" class="modern-list"></ul>
                    </div>

                    <div class="card settings-card" id="host-controls">
                        <div class="card-header">USTAWIENIA</div>
                        <div class="slider-container">
                            <label>LIMIT GRACZY: <span id="max-players-val">4</span></label>
                            <input type="range" id="max-players-range" min="2" max="8" value="4" onchange="updateSettings()">
                        </div>
                        <button id="start-btn" onclick="startGame()" class="btn-full hidden">ROZPOCZNIJ SEKWENCJĘ</button>
                    </div>
                </div>
                <p id="status-msg" class="status-text">Oczekiwanie na inicjalizację hosta...</p>
            </section>

            <!-- EKRAN GRY -->
            <section id="screen-game" class="screen fade-in">
                <!-- HUD GÓRNY -->
                <div class="game-hud-top">
                    <div class="turn-badge">
                        <span class="label">AKTUALNA TURA</span>
                        <span id="current-player-name" class="value">...</span>
                    </div>
                    <div class="lives-badge">
                        <span class="label">STAN INTEGRALNOŚCI</span>
                        <div id="current-lives" class="hearts">❤️❤️❤️</div>
                    </div>
                </div>

                <!-- CENTRUM GRY -->
                <div class="game-center">
                    
                    <!-- TIMER JAKO PASEK -->
                    <div class="timer-container">
                        <div class="timer-bar" id="timer-bar"></div>
                        <span id="timer-text">15.00</span>
                    </div>

                    <!-- FAZA 1: WYBÓR -->
                    <div id="phase-choice" class="phase-container hidden">
                        <h3>INICJACJA LITERĄ</h3>
                        <div class="letters-grid" id="letters-options"></div>
                    </div>

                    <!-- FAZA 2: SŁOWO -->
                    <div id="phase-word" class="phase-container hidden">
                        <div class="letter-display">
                            <span>WYMAGANY ZNAK</span>
                            <strong id="required-letter">A</strong>
                        </div>
                        
                        <div class="input-wrapper">
                            <input type="text" id="word-input" placeholder="WPISZ SŁOWO..." autocomplete="off">
                            <div class="attempts-dots" id="attempts-bar">
                                <span></span><span></span><span></span><span></span><span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LOG -->
                <div class="game-log-wrapper">
                    <div class="log-overlay"></div>
                    <div id="game-log" class="modern-log"></div>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
    <!-- Update Timera w JS dla nowego paska -->
    <script>
        // Nadpisanie funkcji updateTimerUI dla nowego paska
        const originalUpdateTimerUI = updateTimerUI; 
        updateTimerUI = function(val) {
            document.getElementById('timer-text').innerText = val.toFixed(2);
            const percentage = (val / 15) * 100;
            document.getElementById('timer-bar').style.width = percentage + "%";
            
            // Kolory paska
            const bar = document.getElementById('timer-bar');
            if(val < 5) bar.style.background = "#ff4757";
            else if(val < 10) bar.style.background = "#ffa502";
            else bar.style.background = "#2ed573";
        }
    </script>
</body>
</html>
